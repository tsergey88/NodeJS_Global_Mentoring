version: '3.2'

services: 
  db: 
    image: postgres
    container_name: db
    restart: always
    volumes:
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql
    environment:
      POSTGRES_DB: ${dbName}
      POSTGRES_PASSWORD: ${dbPassword}
    ports:
      - '${dbPort}:${dbPort}'
  adminer:
    image: adminer
    container_name: adminer
    restart: always
    ports:
      - ${PORT}:${PORT}
  nodejs:
    container_name: nodejs
    restart: always
    build: .
    depends_on:
      - db
    links: 
      - db
    ports:
      - ${APP_PORT}:${APP_PORT}
